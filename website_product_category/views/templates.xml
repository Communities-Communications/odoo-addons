<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

    <template id="assets_frontend" inherit_id="website.assets_frontend" name="Shop SubCategories">
  <xpath expr="." position="inside">
      <link rel='stylesheet' href='/website_product_category/static/src/css/website_product_category.css'/>
  </xpath>
</template>

<!-- Layout and common templates -->

<template id="products_child_categories" inherit_id="website_sale.products" active="True" customize_show="True" name="Product Child Categories">
  <xpath expr="//div[@id='products_grid']/table" position="before">
<table width="100%">
                <tbody>
                    <tr>
                        <td width="100%">
                            <div class="subcategories-division">
                                <t t-foreach="child_categories" t-as="child_categ">
                                    <t t-set="subcategory" t-value="child_categ"/>
                                    <t t-call="website_product_category.subcategory_item"/>
                                </t>
                            </div>
                        </td>
                    </tr>
                </tbody>
              </table>
  </xpath>
</template>

    <template id="subcategory_item" name="SubCategory item">
        <span itemscope="itemscope" itemtype="http://schema.org/SubCategory">
            <span class="oe_subcategory">
                <div class="oe_subcategory_img">
                    <a itemprop="url" t-att-href="keep('/shop/category/' + slug(subcategory), category=0)">
                        <span itemprop="image" t-field="subcategory.image" t-field-options='{"widget": "image" #{None if product_image_big else ", \"resize\": \"300x300\""}}' t-att-alt="subcategory.name"/>
                    </a>
                </div>
                <div class="oe_subcategory_name">
                    <h5><strong><a itemprop="name" t-att-href="keep('/shop/category/' + slug(subcategory), category=0)" t-field="subcategory.name"/></strong></h5>
                </div>
            </span>
        </span>
    </template>


    <template id="products" name="Products" inherit_id="website_sale.products">
        <xpath expr="//div[@class='text-center text-muted']" position="replace">
      </xpath>
    </template>


    <template id="option_collapse_categories_recursive" name="Collapse Category Recursive" inherit_id="website_sale.option_collapse_categories_recursive">
      <xpath expr="//ul" position="replace">
          <ul t-if="categ.child_id" class="nav nav-pills nav-stacked nav-hierarchy" t-att-style="'display:block;' if categ.id in parent_category_ids else 'display:none;'">
           <t t-foreach="categ.child_id" t-as="categ">
               <t t-if="categ.on_screen">
                   <t t-call="website_sale.option_collapse_categories_recursive"/>
               </t>

          </t>
        </ul>
      </xpath>
    </template>

    </data>
</openerp>